<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游戏制作指南 - 从零开始制作网页游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --dark-color: #2d3436;
            --light-color: #f9f9f9;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
        }
        
        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        nav {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav-link {
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .nav-link:hover {
            color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.05);
        }
        
        .nav-link.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        section {
            padding: 4rem 0;
        }
        
        .section-title {
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background-color: var(--accent-color);
            border-radius: 2px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 10px;
        }
        
        .step-number {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            margin-right: 10px;
        }
        
        .tech-badge {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
        }
        
        .game-demo {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        #gameCanvas {
            background-color: #2d3436;
            border-radius: 8px;
            margin: 1.5rem 0;
            max-width: 100%;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background-color: #5a4bd1;
            transform: translateY(-2px);
        }
        
        .highlight {
            background-color: rgba(253, 203, 110, 0.2);
            padding: 15px;
            border-left: 4px solid var(--warning-color);
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 2rem;
        }
        
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 99;
        }
        
        .back-to-top.visible {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .nav-container {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-link {
                width: 100%;
                text-align: center;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- 返回顶部按钮 -->
    <a href="#" class="back-to-top">
        <i class="fas fa-chevron-up"></i>
    </a>
    
    <!-- 页眉 -->
    <header>
        <div class="container">
            <h1>游戏制作指南</h1>
            <p class="tagline">从零开始制作网页游戏 - 完整步骤与实现要点</p>
        </div>
    </header>
    
    <!-- 导航 -->
    <nav>
        <div class="container nav-container">
            <a href="#steps" class="nav-link active">制作步骤</a>
            <a href="#play" class="nav-link">玩法说明</a>
            <a href="#tech" class="nav-link">技术实现</a>
            <a href="#demo" class="nav-link">游戏演示</a>
        </div>
    </nav>
    
    <!-- 主要内容 -->
    <main class="container">
        <!-- 游戏制作步骤 -->
        <section id="steps">
            <h2 class="section-title">游戏制作步骤详解</h2>
            
            <div class="card">
                <h3 class="card-title"><span class="step-number">1</span> 概念设计与规划</h3>
                <p>在开始编码前，需要明确游戏的基本概念和设计方向：</p>
                <ul>
                    <li><strong>游戏类型：</strong>确定游戏类型（如动作、策略、角色扮演等）</li>
                    <li><strong>核心玩法：</strong>定义游戏的核心机制和玩家主要操作</li>
                    <li><strong>目标受众：</strong>明确游戏面向的玩家群体</li>
                    <li><strong>平台选择：</strong>确定游戏运行的平台（网页、移动端等）</li>
                    <li><strong>技术栈：</strong>选择适合的开发工具和框架</li>
                </ul>
                <div class="highlight">
                    <p><strong>提示：</strong>此阶段最好制作一个简单的游戏设计文档，概述游戏的核心要素。</p>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title"><span class="step-number">2</span> 原型开发</h3>
                <p>创建可运行的最小化游戏原型，验证核心玩法：</p>
                <ul>
                    <li>使用简单图形和基本交互实现核心机制</li>
                    <li>测试游戏的可玩性和趣味性</li>
                    <li>收集反馈并进行快速迭代</li>
                    <li>确定游戏循环和节奏</li>
                    <li>验证技术可行性</li>
                </ul>
            </div>
            
            <div class="card">
                <h3 class="card-title"><span class="step-number">3</span> 资源创建与集成</h3>
                <p>制作游戏所需的各种资源并集成到项目中：</p>
                <ul>
                    <li><strong>视觉资源：</strong>角色、场景、UI元素、动画等</li>
                    <li><strong>音频资源：</strong>背景音乐、音效、语音等</li>
                    <li><strong>数据资源：</strong>关卡数据、角色属性、物品信息等</li>
                    <li>将所有资源按照规范导入项目</li>
                    <li>优化资源大小以提高加载速度</li>
                </ul>
            </div>
            
            <div class="card">
                <h3 class="card-title"><span class="step-number">4</span> 完整开发与测试</h3>
                <p>基于原型扩展为完整游戏，并进行全面测试：</p>
                <ul>
                    <li>实现所有游戏功能和系统</li>
                    <li>添加用户界面和菜单系统</li>
                    <li>开发完整的关卡或游戏内容</li>
                    <li>进行功能测试、平衡测试和用户体验测试</li>
                    <li>修复发现的错误和问题</li>
                </ul>
            </div>
            
            <div class="card">
                <h3 class="card-title"><span class="step-number">5</span> 发布与优化</h3>
                <p>准备游戏发布并进行性能优化：</p>
                <ul>
                    <li>进行最终的性能优化</li>
                    <li>确保游戏在各种设备和浏览器上正常运行</li>
                    <li>添加分析工具追踪用户行为</li>
                    <li>准备营销材料和发布说明</li>
                    <li>发布游戏并收集用户反馈</li>
                </ul>
            </div>
        </section>
        
        <!-- 游戏玩法说明 -->
        <section id="play">
            <h2 class="section-title">游戏玩法说明</h2>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-gamepad"></i> 基本玩法</h3>
                <p>大多数游戏都包含以下基本元素：</p>
                <ul>
                    <li><strong>目标：</strong>玩家需要达成的具体目标（如过关、得分、生存等）</li>
                    <li><strong>规则：</strong>游戏世界的运行规则和约束条件</li>
                    <li><strong>挑战：</strong>阻碍玩家达成目标的障碍和难题</li>
                    <li><strong>互动：</strong>玩家与游戏世界交互的方式</li>
                    <li><strong>反馈：</strong>游戏对玩家操作的反应和回馈</li>
                </ul>
            </div>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-cogs"></i> 游戏机制</h3>
                <p>常见的游戏机制包括：</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-top: 1rem;">
                    <div>
                        <h4>动作机制</h4>
                        <p>移动、跳跃、攻击、躲避等物理互动</p>
                    </div>
                    <div>
                        <h4>策略机制</h4>
                        <p>资源管理、单位部署、战术选择等</p>
                    </div>
                    <div>
                        <h4>角色成长</h4>
                        <p>经验值、升级、技能学习、装备系统</p>
                    </div>
                    <div>
                        <h4>解谜机制</h4>
                        <p>逻辑推理、模式识别、环境互动等</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-layer-group"></i> 游戏结构</h3>
                <p>典型的游戏结构包括以下层次：</p>
                <ol>
                    <li><strong>核心循环：</strong>玩家重复进行的基本游戏活动</li>
                    <li><strong>进程系统：</strong>长期目标和解锁内容</li>
                    <li><strong>元游戏：</strong>游戏外的进度和自定义选项</li>
                    <li><strong>社交层：</strong>排行榜、多人游戏、分享功能</li>
                </ol>
            </div>
        </section>
        
        <!-- 技术实现要点 -->
        <section id="tech">
            <h2 class="section-title">技术实现要点</h2>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-code"></i> HTML5 游戏开发基础</h3>
                <p>现代网页游戏主要使用以下技术：</p>
                
                <h4 style="margin-top: 1.5rem;">核心HTML结构</h4>
                <pre style="background-color: #2d3436; color: white; padding: 1rem; border-radius: 8px; overflow-x: auto; margin: 1rem 0;">
<code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;我的游戏&lt;/title&gt;
    &lt;style&gt;
        body { margin: 0; padding: 0; overflow: hidden; }
        #gameCanvas { display: block; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="gameCanvas"&gt;&lt;/canvas&gt;
    &lt;script src="game.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                
                <h4 style="margin-top: 1.5rem;">关键技术标签</h4>
                <div>
                    <span class="tech-badge">Canvas</span>
                    <span class="tech-badge">WebGL</span>
                    <span class="tech-badge">JavaScript</span>
                    <span class="tech-badge">CSS动画</span>
                    <span class="tech-badge">HTML5音频</span>
                    <span class="tech-badge">本地存储</span>
                    <span class="tech-badge">WebSocket</span>
                    <span class="tech-badge">Gamepad API</span>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-cogs"></i> 游戏循环与渲染</h3>
                <p>游戏的核心是游戏循环，基本结构如下：</p>
                <pre style="background-color: #2d3436; color: white; padding: 1rem; border-radius: 8px; overflow-x: auto; margin: 1rem 0;">
<code>function gameLoop(timestamp) {
    // 计算时间增量
    const deltaTime = timestamp - lastTime;
    lastTime = timestamp;
    
    // 更新游戏状态
    update(deltaTime);
    
    // 清除画布
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // 渲染游戏
    render();
    
    // 请求下一帧
    requestAnimationFrame(gameLoop);
}

// 启动游戏循环
let lastTime = 0;
requestAnimationFrame(gameLoop);</code></pre>
                
                <div class="highlight">
                    <p><strong>性能提示：</strong>使用 requestAnimationFrame 而不是 setInterval 可以获得更流畅的动画效果和更好的性能。</p>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-tools"></i> 常用游戏开发框架</h3>
                <p>根据游戏类型选择合适的开发框架：</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 1rem;">
                    <div>
                        <h4>Phaser</h4>
                        <p>强大的2D游戏框架，适合各种类型的2D游戏开发</p>
                    </div>
                    <div>
                        <h4>Three.js</h4>
                        <p>3D游戏和可视化库，基于WebGL</p>
                    </div>
                    <div>
                        <h4>PixiJS</h4>
                        <p>专注于渲染性能的2D渲染引擎</p>
                    </div>
                    <div>
                        <h4>Babylon.js</h4>
                        <p>功能完整的3D游戏引擎</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 游戏演示 -->
        <section id="demo">
            <h2 class="section-title">简单游戏演示</h2>
            
            <div class="game-demo">
                <h3>点击游戏示例</h3>
                <p>点击移动的方块获得分数，避免碰到红色障碍物</p>
                
                <canvas id="gameCanvas" width="800" height="400"></canvas>
                
                <div>
                    <p>得分: <span id="score">0</span> | 时间: <span id="time">30</span>秒</p>
                    <p>状态: <span id="status">游戏中...</span></p>
                </div>
                
                <div class="game-controls">
                    <button id="startBtn">开始游戏</button>
                    <button id="resetBtn">重置游戏</button>
                    <button id="pauseBtn">暂停游戏</button>
                </div>
                
                <div style="margin-top: 1.5rem; text-align: left;">
                    <h4>演示说明：</h4>
                    <p>这个简单的演示展示了游戏循环、碰撞检测、用户交互和状态管理等基本游戏开发概念。代码完全使用原生JavaScript和Canvas API实现。</p>
                </div>
            </div>
        </section>
    </main>
    
    <!-- 页脚 -->
    <footer>
        <div class="container">
            <p>© 2023 游戏制作指南 | 本页面仅用于教学演示目的</p>
            <p>使用HTML、CSS和JavaScript实现</p>
            <div style="margin-top: 1rem;">
                <a href="#" style="color: white; margin: 0 10px;"><i class="fas fa-code"></i> 查看源代码</a>
                <a href="#" style="color: white; margin: 0 10px;"><i class="fas fa-book"></i> 学习资源</a>
                <a href="#" style="color: white; margin: 0 10px;"><i class="fas fa-gamepad"></i> 更多示例</a>
            </div>
        </div>
    </footer>
    
    <script>
        // 导航高亮
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('section');
        
        function highlightNavLink() {
            let scrollPos = window.scrollY;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionBottom = sectionTop + section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPos >= sectionTop && scrollPos < sectionBottom) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${sectionId}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }
        
        window.addEventListener('scroll', highlightNavLink);
        
        // 返回顶部按钮
        const backToTopBtn = document.querySelector('.back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });
        
        backToTopBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // 简单游戏演示
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const timeElement = document.getElementById('time');
        const statusElement = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        
        // 游戏变量
        let score = 0;
        let timeLeft = 30;
        let gameRunning = false;
        let gamePaused = false;
        let gameLoopId;
        
        // 游戏对象
        const player = {
            x: 100,
            y: 200,
            width: 30,
            height: 30,
            color: '#00b894',
            speed: 5
        };
        
        const target = {
            x: 400,
            y: 200,
            width: 30,
            height: 30,
            color: '#6c5ce7'
        };
        
        const obstacle = {
            x: 600,
            y: 200,
            width: 40,
            height: 40,
            color: '#fd79a8',
            speed: 3,
            direction: 1
        };
        
        // 绘制游戏对象
        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // 添加细节
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(player.x + 8, player.y + 8, 6, 6);
            ctx.fillRect(player.x + 16, player.y + 8, 6, 6);
        }
        
        function drawTarget() {
            ctx.fillStyle = target.color;
            ctx.fillRect(target.x, target.y, target.width, target.height);
            
            // 添加目标图案
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.arc(target.x + target.width/2, target.y + target.height/2, 8, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawObstacle() {
            ctx.fillStyle = obstacle.color;
            ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            
            // 添加危险符号
            ctx.fillStyle = '#ffffff';
            ctx.font = '20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('!', obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2);
        }
        
        // 碰撞检测
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }
        
        // 更新游戏状态
        function updateGame() {
            if (!gameRunning || gamePaused) return;
            
            // 移动障碍物
            obstacle.y += obstacle.speed * obstacle.direction;
            
            // 障碍物碰到边界反弹
            if (obstacle.y <= 0 || obstacle.y + obstacle.height >= canvas.height) {
                obstacle.direction *= -1;
            }
            
            // 检查玩家与目标碰撞
            if (checkCollision(player, target)) {
                score++;
                scoreElement.textContent = score;
                
                // 重新放置目标
                target.x = Math.random() * (canvas.width - target.width);
                target.y = Math.random() * (canvas.height - target.height);
            }
            
            // 检查玩家与障碍物碰撞
            if (checkCollision(player, obstacle)) {
                statusElement.textContent = "碰到障碍物! 游戏结束!";
                gameRunning = false;
                clearInterval(gameLoopId);
            }
        }
        
        // 渲染游戏
        function renderGame() {
            // 清除画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 绘制背景
            ctx.fillStyle = '#2d3436';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制网格背景
            ctx.strokeStyle = '#3c4245';
            ctx.lineWidth = 1;
            
            for (let x = 0; x < canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y < canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // 绘制游戏对象
            drawTarget();
            drawObstacle();
            drawPlayer();
        }
        
        // 游戏循环
        function gameLoop() {
            updateGame();
            renderGame();
        }
        
        // 开始游戏
        function startGame() {
            if (gameRunning) return;
            
            gameRunning = true;
            gamePaused = false;
            score = 0;
            timeLeft = 30;
            
            scoreElement.textContent = score;
            timeElement.textContent = timeLeft;
            statusElement.textContent = "游戏中...";
            
            // 重置玩家位置
            player.x = 100;
            player.y = 200;
            
            // 重置目标位置
            target.x = Math.random() * (canvas.width - target.width);
            target.y = Math.random() * (canvas.height - target.height);
            
            // 重置障碍物位置
            obstacle.x = 600;
            obstacle.y = 200;
            
            // 游戏主循环
            gameLoopId = setInterval(() => {
                if (!gamePaused) {
                    gameLoop();
                }
            }, 1000/60); // 60 FPS
            
            // 计时器
            const timerId = setInterval(() => {
                if (!gameRunning || gamePaused) return;
                
                timeLeft--;
                timeElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    statusElement.textContent = "时间到! 游戏结束!";
                    gameRunning = false;
                    clearInterval(gameLoopId);
                }
            }, 1000);
        }
        
        // 重置游戏
        function resetGame() {
            gameRunning = false;
            gamePaused = false;
            clearInterval(gameLoopId);
            
            score = 0;
            timeLeft = 30;
            
            scoreElement.textContent = score;
            timeElement.textContent = timeLeft;
            statusElement.textContent = "准备开始";
            
            // 重置位置
            player.x = 100;
            player.y = 200;
            target.x = 400;
            target.y = 200;
            obstacle.x = 600;
            obstacle.y = 200;
            
            renderGame();
        }
        
        // 暂停/继续游戏
        function togglePause() {
            if (!gameRunning) return;
            
            gamePaused = !gamePaused;
            if (gamePaused) {
                statusElement.textContent = "游戏暂停";
                pauseBtn.textContent = "继续游戏";
            } else {
                statusElement.textContent = "游戏中...";
                pauseBtn.textContent = "暂停游戏";
            }
        }
        
        // 鼠标点击控制玩家移动
        canvas.addEventListener('click', (e) => {
            if (!gameRunning || gamePaused) return;
            
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            const x = (e.clientX - rect.left) * scaleX;
            const y = (e.clientY - rect.top) * scaleY;
            
            // 平滑移动到点击位置
            const dx = x - player.x;
            const dy = y - player.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance > 0) {
                player.x += dx / distance * player.speed;
                player.y += dy / distance * player.speed;
            }
        });
        
        // 键盘控制（备用）
        document.addEventListener('keydown', (e) => {
            if (!gameRunning || gamePaused) return;
            
            switch(e.key) {
                case 'ArrowUp':
                    player.y -= player.speed;
                    break;
                case 'ArrowDown':
                    player.y += player.speed;
                    break;
                case 'ArrowLeft':
                    player.x -= player.speed;
                    break;
                case 'ArrowRight':
                    player.x += player.speed;
                    break;
            }
            
            // 边界检查
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
            player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
        });
        
        // 按钮事件监听
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        pauseBtn.addEventListener('click', togglePause);
        
        // 初始化游戏
        resetGame();
    </script>
</body>
</html>